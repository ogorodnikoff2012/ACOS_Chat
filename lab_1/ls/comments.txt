У меня опция -std=gnu11 отсутствует, переделай, пожалуйста, сборку без этого, или объясни, почему она необходима.
По коду ls вроде всё неплохо выглядит, давай поговорим на семинаре, если вопросов не останется - зачту
